# Use the official lightweight Nginx image
FROM nginx:alpine


#RUN apt-get update && apt-get install -y vim nano && apt-get clean
#RUN docker-php-ext-install pdo pdo_mysql

# Copy the self-signed certificate and key
COPY frontend/ssl/server.crt /etc/ssl/certs/server.crt
COPY frontend/ssl/server.key /etc/ssl/private/server.key

# Copy custom Nginx configuration file
COPY nginx.conf /etc/nginx/nginx.conf

COPY php-fpm.conf /usr/local/etc/php-fpm.conf

RUN rm /etc/nginx/conf.d/default.conf

COPY ./frontend/ssl /etc/nginx/ssl

RUN chmod 600 /etc/nginx/ssl/server.key
RUN chmod 644 /etc/nginx/ssl/server.crt

# Optional: Copy any static assets if needed
# COPY /path/to/static/assets /usr/share/nginx/html/assets

# Expose HTTP and HTTPS ports (optional, since defined in docker-compose)
EXPOSE 80
EXPOSE 443
